{% extends "base.html" %}

{% block title %}Add New Patient{% endblock %}

{% block content %}
<div class="form-container">
    <h1>Add New Patient</h1>
    
    <form method="POST" action="{{ url_for('new_patient') }}">
        <!-- Patient Information Section -->
        <div class="form-section">
            <h3>Patient Information</h3>
            <div class="form-group">
                <label for="gender">Gender</label>
                <select id="gender" name="gender" required>
                    <option value="M">Male</option>
                    <option value="K">Female</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="weight">Weight (kg)</label>
                <input type="number" step="0.1" id="weight" name="weight" required>
            </div>
            
            <div class="form-group">
                <label for="height">Height (cm)</label>
                <input type="number" step="0.1" id="height" name="height" min="100" max="250" required>
            </div>

            <div class="form-group">
                <label for="bmi">BMI</label>
                <input type="number" step="0.01" id="bmi" name="bmi" min="10" max="50" required>
            </div>

            <div class="form-group">
                <label for="crp">CRP (mg/L)</label>
                <input type="number" step="0.1" id="crp" name="crp" min="0" max="500" required>
            </div>

            <div class="form-group">
                <label for="alb">Albumin (g/dL)</label>
                <input type="number" step="0.1" id="alb" name="alb" min="1" max="10" required>
            </div>

            <div class="form-group">
                <label for="wcc">WCC (×10⁹/L)</label>
                <input type="number" step="0.1" id="wcc" name="wcc" min="0" max="100" required>
            </div>

            <div class="form-group">
                <label for="neu">Neutrophils (×10⁹/L)</label>
                <input type="number" step="0.1" id="neu" name="neu" min="0" max="100" required>
            </div>

            <div class="form-group">
                <label for="total_protein">Total Protein (g/dL)</label>
                <input type="number" step="0.1" id="total_protein" name="total_protein" min="1" max="15" required>
            </div>
        </div>
        
        <!-- Prediction Parameters Section -->
        <div class="form-section">
            <h3>Prediction Parameters</h3>
    
            <div class="form-group">
                <label for="age">Age at Operation</label>
                <input type="number" id="age" name="age" min="18" max="120" required>
            </div>
            
            <div class="form-group">
                <label for="pt">pT Stage</label>
                <select id="pt" name="pt" required>
                    <option value="T1">T1</option>
                    <option value="T2">T2</option>
                    <option value="T3">T3</option>
                    <option value="T4">T4</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="pn">pN Stage</label>
                <select id="pn" name="pn" required>
                    <option value="N0">N0</option>
                    <option value="N1">N1</option>
                    <option value="N2">N2</option>
                    <option value="N3">N3</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="pm">pM Stage</label>
                <select id="pm" name="pm" required>
                    <option value="M0">M0</option>
                    <option value="M1">M1</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="pni">Perineural Invasion</label>
                <select id="pni" name="pni" required>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="grading">Grading</label>
                <select id="grading" name="grading" required>
                    <option value="G1">G1</option>
                    <option value="G2" selected>G2</option>
                    <option value="G3">G3</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="lauren">Lauren Type</label>
                <select id="lauren" name="lauren" required>
                    <option value="jelitowy">Intestinal</option>
                    <option value="rozsiany">Diffuse</option>
                    <option value="mieszany">Mixed</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="cth_preop">Preoperative Chemotherapy</label>
                <select id="cth_preop" name="cth_preop" required>
                    <option value="tak">Yes</option>
                    <option value="nie" selected>No</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="cycles">Number of Cycles</label>
                <input type="number" id="cycles" name="cycles" min="0" max="12" value="0" required>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn-submit">
                <i class="fas fa-save"></i> Save Patient & Calculate Risk
            </button>
        </div>
    </form>
</div>
{% endblock %}